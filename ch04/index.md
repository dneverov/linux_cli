# Операции с файлами и каталогами

Команды для работы с файлами и каталогами:

- `cp` — копирует файлы и каталоги;
- `mv` — перемещает/переименовывает файлы и каталоги;
- `mkdir` — создает каталоги;
- `rm` — удаляет файлы и каталоги;
- `ln` — создает жесткие и символьные ссылки.

**Пр.**  
…скопировать файлы HTML из одного каталога в другой, причем только те, что отсутствуют в каталоге назначения или имеют  более позднюю дату последнего изменения.

```
cp -u *.html destination
```


## Групповые символы

Командная оболочка поддерживает специальные симвоолы, помогающие быстро определять группы имен файлов. Эти специальные символы называют _групповыми символами_ (wildcards). Также известны как _символы подстановки_ (globbing) позволяют выбирать имена файлов по шаблону.


### 4.1 Групповые символы

- `*` — Любая последовательность любых символов
- `?` — Любой один символ
- `[символы]` — Любой один символ из указанного множества символов
- `[!символы]` — Любой один символ, не принадлежащий указанному множеству символов
- `[[:класс:]]` — Любой один символ, принадлежащий указанному классу


### 4.2 Наиболее часто используемые классы символов

- `[:alnum:]` — Любой алфавитно-цифровой символ
- `[:alpha:]` — Любой алфавитный символ
- `[:digit:]` — Любой цифровой символ
- `[:lower:]` — Любая буква в нижнем регистре
- `[:upper:]` — Любая буква в верхнем регистре


Групповые символы также действуют в графическом интерфейсе

- В Nautilus (GNOME) можно выбирать файлы с помощью диалога Edit (Правка) - Select Pattern (Выделить по шаблону).

- В некоторых версиях Dolphin и Konqueror (KDE) групповые символы можно вводить непоредственно в адресную строку.


### 4.3 Примеры использования групповых символов

- `*` — Все имена файлов;
- `g*` — Все имена файлов, начинающиеся с символа `g`;
- `b*.txt` — Все имена файлов, начинающиеся с символа `b`, за которым следует любое число других символов, и заканчивающиеся на `.txt`;
- `Data???` — Все имена файлов, начинающиеся с символов `Data`, за которыми следуют ровно три любых символа;
- `[abc]*` — Все имена файлов, начинающиеся с символа `a`, `b` или `c`;
- `BACKUP.[0-9][0-9][0-9]` — Все имена файлов, начинающиеся с символов `BACKUP.`, за которыми следуют ровно три цифровых символа;
- `[[:upper:]]*` — Все имена файлов, начинающиеся с буквы в верхнем регистре;
- `[![:digit:]]*` — Все имена файлов, не начинающиеся с цифры;
- `*[[:lower:]123]` — Все имена файлов, заканчивающиеся буквой в нижнем регистре или цифрой `1`, `2` или `3`.


Групповые символы можно использовать с любыми командами, принимающими имена файлов в виде аргументов.


#### Диапазоны символов

`[A-Z]` или `[a-z]`... будьте очень осторожны при их использовании, потому что они не всегда дают ожидаемый результат без правильной настройки. А вообще старайтесь избегать их и использовать классы символов.


### mkdir — создание каталогов

Команда `mkdir` используется для создания каталогов. Вызывается она следующим образом:

    mkdir каталог...

**Примечание к форме записи:** в этой книге три точки в описании команды, следующие за аргументом (как в примере выше), говорят о том, что аргументов будет несколько.

    mkdir dir1

создаст один каталог с именем _dir1_

    mkdir dir1 dir2 dir3

создаст три каталога с именами _dir1_, _dir2_ и _dir3_.


### cp — копирование файлов или каталогов

    cp item1 item2

чтобы скопировать один файл или каталог _item1_ в файл или каталог _item2_.

    cp элемент... каталог

чтобы скопировать несколько элементов (файлов или каталогов) в указанный каталог.


#### 4.4. Параметры команды cp

- `-a, --archive` — Скопировать файлы и каталоги со всеми атрибутами, включая идентификаторы владельцев и права доступа;
- `-i, --interactive` — Запрашивать у пользователя подтверждение перед перезаписью существующего файла;
- `-r, --recursive` — Рекурсивно копировать каталоги и их содержимое. Это **обязательный** параметр (или параметр `-a`) при копировании **каталогов**;
- `-u, --update` — При копировании файлов из одного каталога в другой копировать только файлы, отсутствующие в каталоге назначения или более новые;
- `-v, --verbose` — Выводить информационные сообщения в процессе копирования.


#### 4.5. Примеры использования команды cp

`cp file1 file2`

`cp -i file1 file2`

`cp file1 file2 dir1` — скопирует _file1_ и _file2_ в каталог _dir1_ (должен существовать)

`cp dir1/* dir2` — скопирует все файлы из каталога _dir1_ в каталог _dir2_ (должен существовать)

`cp -r dir1 dir2` — скопирует содержимое каталога _dir1_ в каталог _dir2_. Если каталог _dir2_ не существует, он будет создан и заполнен содержимым каталога _dir1_. Если каталог _dir2_ существует, тогда в него будет скопирован сам каталог _dir1_ (вместе с его содержимым).
